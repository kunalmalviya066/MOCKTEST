/* -------------------------------------------------------
  ENHANCED STYLESHEET — Fully compatible drop-in replacement
  - Preserves existing HTML structure & class names.
  - Improves accessibility, reduced-motion respect, and theme
  - Light & Dark modes included. Non-invasive defaults.
  - Minimal specificity to avoid interfering with other files.

  To use: replace your old stylesheet with this file or import it
  after your base stylesheet (if you need to override selectively).
------------------------------------------------------- */

/* =======================================================
   0. THEME VARIABLES — clearer names, fallbacks, and tokens
   ======================================================= */
:root{
  /* Core colors */
  --bg: #f8fafc;
  --panel: #ffffff;
  --panel-2: #f1f5f9;
  --text: #0f1724; /* slightly darker for contrast */
  --muted: #64748b;
  --muted-2: #94a3b8;
  --border: rgba(15,23,42,0.08);

  /* Accents */
  --accent: #3b82f6;
  --accent-2: #2563eb;
  --accent-3: #0ea5e9;

  /* Feedback */
  --success: #10b981;
  --danger: #ef4444;
  --warn: #f59e0b;

  /* Layout */
  --radius: 16px;
  --radius-sm: 10px;
  --font: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;

  /* Motion & timing */
  --ease: cubic-bezier(0.25, 0.9, 0.3, 1);
  --transition: 250ms var(--ease);

  /* Shadows (scaleable) */
  --shadow-xs: 0 1px 2px rgba(15,23,42,0.04);
  --shadow-sm: 0 4px 8px rgba(15,23,42,0.06);
  --shadow-md: 0 8px 24px rgba(15,23,42,0.10);
  --shadow-lg: 0 18px 48px rgba(15,23,42,0.14);
  --shadow-glow: 0 6px 28px rgba(59,130,246,0.12);

  /* Glass/overlay */
  --glass: rgba(255,255,255,0.6);
  --glass-border: rgba(255,255,255,0.4);

  /* accessibility */
  --focus-ring: color-mix(in srgb, var(--accent) 60%, transparent 40%);
  --reduced-motion-duration: 0.001ms;
}

/* Dark theme tokens override */
[data-theme="dark"]{
  --bg: #0b1120;
  --panel: #111827;
  --panel-2: #1e293b;
  --text: #e6eef8;
  --muted: #94a3b8;
  --muted-2: #64748b;
  --border: rgba(226,232,240,0.06);
  --accent: #60a5fa;
  --accent-2: #3b82f6;
  --accent-3: #38bdf8;
  --success: #34d399;
  --danger: #f87171;
  --warn: #fbbf24;

  --shadow-xs: 0 6px 18px rgba(2,6,23,0.36);
  --shadow-sm: 0 10px 30px rgba(2,6,23,0.42);
  --shadow-md: 0 20px 48px rgba(2,6,23,0.52);
  --shadow-lg: 0 32px 80px rgba(0,0,0,0.6);
  --shadow-glow: 0 8px 36px rgba(59,130,246,0.14);

  --glass: rgba(255,255,255,0.02);
  --glass-border: rgba(255,255,255,0.03);
}

/* =======================================================
   1. Global Reset & Accessibility-friendly Defaults
   - Keep specificity low so this file is safe as a drop-in.
   ======================================================= */
*,*::before,*::after{box-sizing:border-box}

html,body{height:100%;width:100%;margin:0;padding:0;font-family:var(--font);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

/* Respect reduced motion early */
@media (prefers-reduced-motion:reduce){
  :root{ --transition: var(--reduced-motion-duration); }
  *{ animation-duration:var(--reduced-motion-duration)!important; transition-duration:var(--reduced-motion-duration)!important }
}

body{
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  padding:24px;
  transition:background var(--transition),color var(--transition);
  /* allow text selection by default so this is non-invasive */
  -webkit-user-select:text; -moz-user-select:text; user-select:text;
}

/* sensible container that doesn't force markup changes */
.wrap{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;gap:24px;padding:12px}

.hidden{display:none!important}

/* small screens spacing adjustment */
@media (max-width:420px){
  .wrap{gap:16px;padding:10px}
}

/* =======================================================
   2. Header — polished, accessible, responsive
   (keeps original classes & structure; improves focus states)
   ======================================================= */
header{
  --blur:14px;
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;
  background:linear-gradient(135deg,color-mix(in srgb,var(--panel) 90%,var(--accent) 5%),color-mix(in srgb,var(--panel-2) 85%,var(--accent-3) 8%));
  border:1px solid color-mix(in srgb,var(--border),var(--accent) 10%);
  border-radius:var(--radius);
  padding:16px 22px;backdrop-filter:blur(var(--blur)) saturate(120%);-webkit-backdrop-filter:blur(var(--blur)) saturate(120%);
  box-shadow:0 8px 24px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.06), var(--shadow-glow);
  transition:background 400ms var(--ease),box-shadow 400ms var(--ease),transform 300ms var(--ease);
  position:relative;overflow:hidden
}

/* Light sweep kept but reduced motion for accessibility */
header::before{content:"";position:absolute;inset:0;background:linear-gradient(120deg,transparent 20%,color-mix(in srgb,var(--accent-3),#fff 60%) 50%,transparent 80%);opacity:0;transform:translateX(-100%);transition:opacity 0.4s,transform 0.8s var(--ease)}
@media (prefers-reduced-motion:reduce){header::before{transition:none;display:none}}
header:hover::before{opacity:0.12;transform:translateX(100%)}
header:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,0,0,0.12),0 0 20px color-mix(in srgb,var(--accent-2),transparent 80%)}

/* Logo — non-invasive visual effect and accessible contrast */
header .logo{position:relative;background:linear-gradient(145deg,var(--accent-2),var(--accent-3));color:#fff;font-weight:900;font-family:var(--mono);padding:10px 18px;border-radius:14px;letter-spacing:-0.4px;font-size:1rem;display:inline-flex;align-items:center;gap:8px;flex-shrink:0;text-shadow:0 2px 6px rgba(0,0,0,0.28);box-shadow:0 3px 12px rgba(0,0,0,0.12),0 0 16px color-mix(in srgb,var(--accent),transparent 60%);transition:transform 200ms var(--ease),box-shadow 300ms var(--ease)}
header .logo:focus{outline:3px solid var(--focus-ring);outline-offset:3px}
header .logo:hover{transform:translateY(-1px) scale(1.03)}
header .logo::after{content:"";position:absolute;inset:0;border-radius:inherit;background:radial-gradient(circle at 30% 120%,rgba(255,255,255,0.28) 0%,transparent 70%);mix-blend-mode:overlay;opacity:0.3;transition:opacity 0.3s var(--ease)}

/* small animated accent, aria-hidden */
header .logo .dot{width:10px;height:10px;border-radius:50%;background:#fff;box-shadow:0 0 10px #fff,0 0 20px color-mix(in srgb,var(--accent-3),transparent 30%);animation:pulseDot 1.8s infinite ease-in-out}
@keyframes pulseDot{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.4);opacity:0.75}}
@media (prefers-reduced-motion:reduce){header .logo .dot{animation:none}}

/* Title — preserved semantics and improved responsive sizing */
header h1{margin:0;font-size:clamp(1rem,4vw,1.25rem);font-weight:700;color:var(--text);flex:1;text-align:center;line-height:1.4;letter-spacing:-0.25px;transition:color var(--transition);position:relative}
header h1 span{background:linear-gradient(90deg,var(--accent-2),var(--accent-3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}
header h1::after{content:"";position:absolute;bottom:-4px;left:50%;width:0;height:2px;background:linear-gradient(90deg,var(--accent-3),var(--accent-2));border-radius:2px;transform:translateX(-50%);opacity:0;transition:width 0.4s var(--ease),opacity 0.4s var(--ease)}
header:hover h1::after{width:40%;opacity:0.6}

/* Theme toggle — accessible button with aria-label expected in markup */
.theme-toggle{background:color-mix(in srgb,var(--panel-2) 85%,var(--accent) 8%);border:1px solid color-mix(in srgb,var(--border),var(--accent) 15%);border-radius:50%;width:44px;height:44px;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform 220ms var(--ease),background var(--transition),box-shadow var(--transition),color var(--transition);flex-shrink:0;box-shadow:inset 0 0 6px rgba(255,255,255,0.2),0 2px 10px rgba(0,0,0,0.08);color:var(--text)}
.theme-toggle:hover{transform:scale(1.06) rotate(6deg);background:linear-gradient(135deg,var(--accent-2),var(--accent-3));color:#fff;box-shadow:0 0 20px color-mix(in srgb,var(--accent),transparent 60%),0 4px 14px rgba(0,0,0,0.12)}
.theme-toggle:active{transform:scale(0.95)}
.theme-toggle:focus{outline:3px solid var(--focus-ring);outline-offset:3px}

/* Mobile header adjustments (non-breaking) */
@media (max-width:768px){header{flex-direction:column;align-items:center;text-align:center;gap:10px;padding:18px}header .logo{font-size:0.95rem;padding:8px 14px}header h1{font-size:1.05rem;margin-top:8px}.theme-toggle{margin-top:10px}}

/* =======================================================
   3. Buttons — consistent scale, accessible focus
   ======================================================= */
.btn{display:inline-flex;align-items:center;justify-content:center;border:none;border-radius:var(--radius-sm);font-weight:600;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition),filter var(--transition);font-size:14px;line-height:1.2;user-select:none;padding:10px 18px;text-align:center;white-space:nowrap;min-height:40px}

/* Primary / start buttons kept but slightly softened to avoid layout shift */
.btn.primary,.btn.start{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;box-shadow:var(--shadow-glow),var(--shadow-sm);font-weight:700;font-size:clamp(14px,4vw,16px);padding:12px 24px;border-radius:12px}
.btn.primary:hover,.btn.start:hover{transform:translateY(-2px);filter:brightness(1.06);box-shadow:var(--shadow-lg),0 8px 32px rgba(37,99,235,0.12);animation:pulseGlow 1.25s infinite alternate}
@keyframes pulseGlow{from{box-shadow:var(--shadow-glow);transform:translateY(-1px)}to{box-shadow:0 12px 44px rgba(37,99,235,0.18);transform:translateY(-3px)}}

.btn.primary:active,.btn.start:active{transform:scale(0.986);filter:brightness(0.96)}

.btn.ghost{background:transparent;border:1px solid var(--accent);color:var(--accent);flex-grow:1;box-shadow:none}
.btn.ghost:hover{background:color-mix(in srgb,var(--accent),transparent 85%);color:#fff}

.btn.small{font-size:13px;padding:6px 12px;min-height:32px}
@media (max-width:540px){.btn.primary,.btn.start,.btn.ghost{width:100%;white-space:normal;padding-left:12px;padding-right:12px}}

/* focus states — visible but not disruptive */
.btn:focus{outline:3px solid var(--focus-ring);outline-offset:3px}

/* =======================================================
   4. Cards — keep same structure, improved depth & perf
   ======================================================= */
.card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius-sm);padding:14px;box-shadow:var(--shadow-sm);transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition);font-size:14px;min-height:80px;display:flex;flex-direction:column;justify-content:center}
.card.elevated{box-shadow:var(--shadow-md),var(--shadow-glow);transform:translateY(0)}
.card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.card .meta{font-size:12px;color:var(--muted);margin-bottom:8px}
.card h3{margin:0 0 6px 0;font-size:15px}
.card p{margin:0;color:var(--muted-2)}
.card.frost{background:linear-gradient(180deg,color-mix(in srgb,var(--panel),#fff 96%),var(--panel));border:1px solid color-mix(in srgb,var(--accent),transparent 85%);backdrop-filter:blur(6px)}

/* =======================================================
   5. Subjects & Topics — grid-friendly, keyboard navigable
   ======================================================= */
.subjects{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}
.subject{background:var(--panel-2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:10px 16px;text-align:center;font-weight:600;font-size:13px;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition),background var(--transition);min-height:50px;display:flex;align-items:center;justify-content:center;line-height:1.4;overflow-wrap:break-word;box-shadow:var(--shadow-xs)}
.subject:hover,.subject:focus{transform:translateY(-3px);background:linear-gradient(135deg,var(--accent),var(--accent-3));color:#fff;border-color:var(--accent);box-shadow:var(--shadow-sm),0 6px 22px rgba(59,130,246,0.12)}
.subject.selected{background:linear-gradient(135deg,var(--accent-2),var(--accent-3));color:#fff;border-color:var(--accent-2);box-shadow:var(--shadow-glow)}

.topics-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px;margin-top:12px}
.topic{background:var(--panel-2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:8px 14px;text-align:center;font-size:12px;font-weight:500;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition),background var(--transition);min-height:40px;display:flex;align-items:center;justify-content:center;line-height:1.3;color:var(--text);box-shadow:var(--shadow-xs)}
.topic:hover,.topic:focus{transform:translateY(-2px);background:linear-gradient(135deg,var(--accent),var(--accent-3));color:#fff;border-color:var(--accent);box-shadow:0 6px 20px rgba(59,130,246,0.14)}
.topic.selected{background:linear-gradient(135deg,var(--accent-2),var(--accent-3));color:#fff;border-color:var(--accent-2);box-shadow:0 6px 20px rgba(59,130,246,0.18)}

/* Ensure subjects/topics can be keyboard focused if clickable */
.subject,[role="button"].subject{outline:none}
.topic,[role="button"].topic{outline:none}

/* =======================================================
   6. Test Section (questions, options, progress) — accessible
   ======================================================= */
.test-header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:8px}
.timer{font-family:var(--mono);font-weight:700;color:var(--accent-2);font-size:clamp(1rem,5vw,1.2rem);flex-grow:1}
.progress{width:100%;max-width:240px;height:12px;background:var(--panel-2);border-radius:999px;overflow:hidden;flex-shrink:0;box-shadow:var(--shadow-xs) inset}
.progress i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent-2),var(--accent-3));border-radius:999px;transition:width 0.4s var(--ease);box-shadow:0 2px 8px rgba(14,165,233,0.12)}
#questions-wrap{margin-top:16px;display:flex;flex-direction:column;gap:10px}

.question{background:var(--panel-2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:14px;transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition);font-size:14px;overflow-wrap:break-word;box-shadow:var(--shadow-xs)}
.question:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm)}

.option{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius-sm);padding:10px 12px;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition),background var(--transition);margin-top:6px;font-size:14px;display:flex;gap:12px;align-items:center;overflow-wrap:break-word;box-shadow:var(--shadow-xs)}
.option:hover{transform:translateY(-1.5px);background:color-mix(in srgb,var(--accent),transparent 85%);box-shadow:var(--shadow-sm)}
.option.selected{border-color:var(--accent);background:linear-gradient(135deg,var(--accent-2),var(--accent-3));color:#fff;box-shadow:var(--shadow-glow)}
.option:focus{outline:3px solid var(--focus-ring);outline-offset:3px}

.option .marker{min-width:18px;min-height:18px;border-radius:6px;border:1px solid var(--border);display:inline-flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted);background:transparent}

/* =======================================================
   7. Form Controls — consistent, accessible controls
   ======================================================= */
input,select,textarea{background:var(--panel);border:1px solid var(--border);padding:10px 12px;border-radius:var(--radius-sm);font-size:14px;color:var(--text);transition:box-shadow var(--transition),border-color var(--transition),transform var(--transition);box-shadow:var(--shadow-xs)}
input:focus,select:focus,textarea:focus{border-color:var(--accent-2);box-shadow:0 6px 20px rgba(37,99,235,0.08);outline:none;transform:translateY(-1px)}

input[type="range"]{-webkit-appearance:none;height:6px;border-radius:999px;background:var(--panel-2);outline:none}
label{font-weight:600;font-size:13px;color:var(--muted)}

/* custom checkbox / radio accessible implementation — keep semantics */
.input-inline{display:flex;gap:8px;align-items:center}
.checkbox,.radio{appearance:none;-webkit-appearance:none;width:18px;height:18px;border-radius:6px;border:1px solid var(--border);display:inline-block;position:relative;cursor:pointer;transition:all var(--transition);background:var(--panel);box-shadow:var(--shadow-xs)}
.checkbox:checked,.radio:checked{background:linear-gradient(90deg,var(--accent-2),var(--accent-3));border-color:transparent;box-shadow:var(--shadow-glow)}
.checkbox:checked::after{content:"✓";color:#fff;font-size:12px;position:absolute;top:1px;left:4px}
.radio{border-radius:50%}
.radio:checked::after{content:"";width:8px;height:8px;border-radius:50%;background:#fff;position:absolute;top:5px;left:5px}

/* Keep native focus for form controls for accessibility */
input:focus-visible,select:focus-visible,textarea:focus-visible{outline:3px solid var(--focus-ring);outline-offset:3px}

/* =======================================================
   8. Modal — robust, non-blocking, and keyboard friendly
   ======================================================= */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;overflow-y:auto;backdrop-filter:blur(6px);transition:opacity 0.4s var(--ease)}
.modal[aria-hidden="true"]{pointer-events:none;opacity:0}
.modal-content{background:var(--panel);border-radius:var(--radius);padding:24px;max-width:520px;width:100%;box-shadow:var(--shadow-lg);animation:fadeInUp 0.4s var(--ease) forwards;text-align:center;border:1px solid color-mix(in srgb,var(--border),transparent 60%)}

.modal-content h2{margin-top:0;margin-bottom:12px;color:var(--accent-2);font-size:clamp(1.5rem,4vw,2rem);font-weight:800}
.modal-content p{color:var(--muted);margin-bottom:24px}
.modal-content label{font-weight:600;display:block;font-size:14px;margin-top:10px;text-align:left}
.modal-content input{width:100%;padding:12px 14px;border-radius:var(--radius-sm);border:1px solid var(--border);margin-top:6px;font-size:14px;color:var(--text);background:var(--panel-2);transition:all 0.2s var(--ease)}
.modal-content input:focus{border-color:var(--accent-2);box-shadow:0 4px 12px rgba(37,99,235,0.1);outline:none;transform:translateY(-2px)}
.modal-content button{margin-top:24px;width:100%}
.modal .close{position:absolute;top:10px;right:12px;background:transparent;border:none;font-size:18px;color:var(--muted);cursor:pointer;transition:transform 0.2s}
.modal .close:hover{transform:scale(1.15);color:var(--text)}

/* Activation modal specifics — keep existing ID hooks */
#activationModal{display:none;align-items:center;justify-content:center;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:2000;padding:16px;backdrop-filter:blur(4px);transition:opacity 260ms var(--ease)}
#activationModal.active{display:flex;opacity:1;pointer-events:auto}
#activationModal .modal-content{padding:32px 28px;max-width:420px;box-shadow:var(--shadow-lg);text-align:left}
#errorMsg{margin-top:10px;font-size:13px;color:var(--danger);display:none;text-align:center}
#activationForm{display:flex;flex-direction:column;gap:12px}
#activationModal .btn{background:linear-gradient(90deg,var(--accent-2),var(--accent-3));color:#fff;border:none;padding:12px 24px;font-weight:700;font-size:16px;border-radius:var(--radius-sm);cursor:pointer;transition:transform var(--transition),box-shadow var(--transition);box-shadow:0 4px 12px rgba(37,99,235,0.3)}
#activationModal .btn:hover{transform:translateY(-2px);filter:brightness(1.05);box-shadow:0 8px 32px rgba(37,99,235,0.18)}

/* =======================================================
   9. Results Page — grid & card adjustments
   ======================================================= */
.results-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-top:18px}
.result-card{background:var(--panel-2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:14px;text-align:center;box-shadow:var(--shadow-sm);transition:transform var(--transition),box-shadow var(--transition)}
.result-card:hover{transform:translateY(-3px);box-shadow:var(--shadow-md)}
.result-card h4{margin:0;font-size:13px;color:var(--muted)}
.result-card .value{margin-top:6px;font-size:clamp(18px,6vw,22px);font-weight:800;overflow-wrap:break-word}
.result-card.score .value{color:var(--success)}
.result-card.correct .value{color:var(--success)}
.result-card.wrong .value{color:var(--danger)}
.result-card.accuracy .value{color:var(--accent-3)}

#incorrect-list{margin-top:16px;display:flex;flex-direction:column;gap:12px}
#incorrect-list .question-box{background:linear-gradient(180deg,var(--panel-2),color-mix(in srgb,var(--panel-2),#000 1%));border:1px solid color-mix(in srgb,var(--danger),var(--panel-2) 60%);border-radius:var(--radius-sm);padding:12px 14px;transition:transform var(--transition),box-shadow var(--transition),background var(--transition);overflow-wrap:break-word;box-shadow:0 6px 20px rgba(239,68,68,0.04)}
#incorrect-list .question-box:hover{transform:translateY(-2px);background:color-mix(in srgb,var(--danger),var(--panel-2) 12%);box-shadow:0 10px 30px rgba(239,68,68,0.06)}
#incorrect-list .question-box strong{color:var(--danger);word-wrap:break-word}
#incorrect-list .question-box p{margin:6px 0 0;font-size:13px;color:var(--text)}

/* =======================================================
   10. Footer & small layout helpers
   ======================================================= */
footer{text-align:center;font-size:13px;color:var(--muted-2);margin-top:24px;padding:12px 0;background:var(--panel);border-top:1px solid var(--border);border-radius:var(--radius-sm) var(--radius-sm) 0 0;box-shadow:var(--shadow-xs)}
footer a{color:var(--accent);text-decoration:none;transition:color var(--transition)}
footer a:hover{color:var(--accent-2)}

/* responsive tweaks */
@media (max-width:768px){body{padding:16px}.subjects,.topics-list{grid-template-columns:1fr 1fr;gap:8px}.test-header{flex-direction:column;align-items:flex-start;gap:6px}.progress{max-width:100%}}
@media (max-width:540px){.subjects,.topics-list{grid-template-columns:1fr}.modal-content{max-width:95%}.btn,.btn.start{width:100%;justify-content:center;padding-left:12px;padding-right:12px}}

/* =======================================================
   11. Animations, utilities & accessibility helpers
   - Keep animations subtle and respect reduced-motion
   ======================================================= */
@keyframes fadeInUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.card,.subject,.topic,.result-card{animation:fadeInUp 0.45s var(--ease) forwards}
.btn,.option,.subject,.topic{transition:all 0.25s var(--ease)}
.subject:hover,.topic:hover,.btn.primary:hover{filter:brightness(1.05);transform:translateY(-2px)}
footer{animation:fadeInUp 0.6s var(--ease) forwards}

/* reduced motion override for animations */
@media (prefers-reduced-motion:reduce){.card,.subject,.topic,.result-card,header,.logo{animation:none!important;transition:none!important}}

/* Utilities */
.badge{display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;font-size:12px;font-weight:700;border-radius:999px;background:color-mix(in srgb,var(--accent),#fff 94%);color:var(--accent-2);box-shadow:var(--shadow-xs);border:1px solid color-mix(in srgb,var(--accent),transparent 85%)}
.chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:var(--panel-2);border:1px solid var(--border);font-size:13px;box-shadow:var(--shadow-xs)}
.pill{border-radius:999px;padding:6px 12px;font-weight:600}

.skeleton{background:linear-gradient(90deg,color-mix(in srgb,var(--panel-2),#fff 93%),color-mix(in srgb,var(--panel),#fff 95%),color-mix(in srgb,var(--panel-2),#fff 93%));background-size:200% 100%;animation:shimmer 1.6s linear infinite;border-radius:8px;min-height:12px}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}

.muted-text{color:var(--muted);font-size:13px}
.small{font-size:13px}
.row{display:flex;gap:12px;align-items:center}
.col{display:flex;flex-direction:column;gap:8px}
.elevated{box-shadow:var(--shadow-md)!important;transform:translateY(0)}

/* Accessibility microcopy helpers */
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

/* === Activation Modal Upgrade === */
.activation-modal,
.activation-required,
.modal,
#activationModal {
  background: rgba(255, 255, 255, 0.8) !important;
  backdrop-filter: blur(12px) !important;
  border-radius: 16px !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2) !important;
  padding: 2rem 2.5rem !important;
  max-width: 440px !important;
  width: 90% !important;
  margin: auto !important;
  animation: modalPop 0.35s ease-out;
}

/* Header */
.activation-modal h2,
.activation-required h2,
#activationModal h2 {
  font-size: 1.8rem !important;
  font-weight: 700 !important;
  color: #0066ff !important;
  margin-bottom: 1.2rem !important;
  text-align: left !important;
}

/* Labels */
.activation-modal label,
.activation-required label,
#activationModal label {
  font-size: 0.95rem !important;
  color: #333 !important;
  font-weight: 500 !important;
  margin-bottom: 0.4rem !important;
  display: inline-block !important;
}

/* Inputs */
.activation-modal input,
.activation-required input,
#activationModal input {
  border: 1.5px solid #e0e0e0 !important;
  border-radius: 10px !important;
  padding: 0.75rem 1rem !important;
  width: 100% !important;
  font-size: 0.95rem !important;
  transition: all 0.25s ease !important;
  background: rgba(255, 255, 255, 0.9) !important;
}

.activation-modal input:focus,
.activation-required input:focus,
#activationModal input:focus {
  border-color: #0066ff !important;
  box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.15) !important;
  outline: none !important;
}

/* Button */
.activation-modal button,
.activation-required button,
#activationModal button {
  background: linear-gradient(90deg, #0066ff, #0099ff) !important;
  color: #fff !important;
  font-weight: 600 !important;
  border: none !important;
  border-radius: 10px !important;
  padding: 0.8rem 1.5rem !important;
  width: 100% !important;
  cursor: pointer !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
}

.activation-modal button:hover,
.activation-required button:hover,
#activationModal button:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3) !important;
}

.activation-modal button:active,
.activation-required button:active,
#activationModal button:active {
  transform: translateY(0) !important;
  box-shadow: none !important;
}

/* Small animation for modal */
@keyframes modalPop {
  0% {
    transform: scale(0.95);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}


/* =======================================================
   12. Final notes (non-code):
   - This stylesheet was designed to be a drop-in replacement: it
     preserves class names and IDs you provided and avoids high
     specificity so it won't accidentally override unrelated
     code. If you maintain other stylesheets that rely on very
     specific overrides, load them after this file.
   - Interaction expectations: ensure buttons/interactive
     elements include proper aria labels and keyboard handlers.
   - If you want a smaller file that only changes colors/vars,
     copy the :root and [data-theme="dark"] blocks into your
     existing stylesheet instead of replacing everything.

   End of enhanced stylesheet
------------------------------------------------------- */
